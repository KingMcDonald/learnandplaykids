<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Play & Learn Kids - Design For Kids To Play and Learn</title>
    <meta name="description" content="Learn & Play Kids - An interactive educational game where kids plant gardens, complete activities, and grow magical plants. Works online and offline!">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Learn & Play">
    
    <link rel="icon" href="assets/Brainy_Web_App.png" type="image/png" />
    <link rel="apple-touch-icon" href="assets/Brainy_Web_App.png">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css" />
    <script>
      // Global error handler for debugging
      window.addEventListener('error', (e) => {
        console.error('âŒ JavaScript Error:', e.message, 'at', e.filename, ':', e.lineno);
      });
      window.addEventListener('unhandledrejection', (e) => {
        console.error('âŒ Unhandled Promise:', e.reason);
      });
      console.log('âœ… App starting...');
    </script>
  </head>
  <body>
    <!-- ==================== LOADING SCREEN ==================== -->
    <div id="loadingScreen" class="screen active">
      <div class="loading-container">
        <img
          src="assets/Brainy_Web_App.png"
          alt="Brainy App"
          class="loading-image"
        />
        <p class="app-name">KM - Brainy</p>
        <div class="loading-bar-container">
          <div id="loadingBar" class="loading-bar"></div>
        </div>
        <p class="loading-text">Loading...</p>
      </div>
    </div>

    <!-- ==================== START SCREEN ==================== -->
    <div id="startScreen" class="screen">
      <div class="container">
        <h1 class="title">Garden Learn & Play</h1>
        <p class="subtitle">Help your plant grow by learning & playing!</p>
        <div class="name-input-box">
          <label for="userName">What's your name?</label>
          <input
            type="text"
            id="userName"
            class="name-input"
            placeholder="Enter your name"
            maxlength="20"
            pattern="[A-Za-z\s]+"
            title="Name can only contain letters and spaces"
            onkeypress="if (event.key === 'Enter') game.startGame();"
          />
          <small id="nameError" style="color: red; display: none;">Please enter a valid name (letters only)</small>
        </div>
        <button class="main-btn start-btn" onclick="game.startGame()">
          START PLAY
        </button>
        <button class="main-btn help-btn" onclick="game.showTutorial()">
          ğŸ“š How to Play
        </button>
      </div>
    </div>

    <!-- ==================== TUTORIAL MODAL ==================== -->
    <div id="tutorialModal" class="modal" style="display: none;">
      <div class="modal-content tutorial-interactive">
        <button class="modal-close" onclick="document.getElementById('tutorialModal').style.display='none';">âœ•</button>
        <div id="tutorialStep" class="tutorial-step" data-step="0">
          <div class="tutorial-header">ğŸ® Welcome to Learn & Play Kids!</div>
          <div class="tutorial-body">
            <p style="font-size: 24px; font-weight: bold; color: #fff;">Let's Learn Together!</p>
            <p style="font-size: 18px; margin: 20px 0; color: #fff;">Click NEXT to start your adventure ğŸ‘‡</p>
          </div>
          <div class="tutorial-buttons">
            <button class="tutorial-btn" onclick="game.nextTutorialStep();">NEXT âœ</button>
          </div>
        </div>

        <div id="tutorialStep-1" class="tutorial-step" style="display:none;" data-step="1">
          <div class="tutorial-header">ğŸŒ± Meet Your Plant!</div>
          <div class="tutorial-body">
            <p style="font-size: 60px; text-align: center; margin: 20px 0;">ğŸŒ±</p>
            <p style="font-size: 18px; text-align: center;"><strong>This is YOUR plant!</strong></p>
            <p style="font-size: 16px; margin: 15px 0;">When you complete activities and earn points, your plant grows! ğŸŒ¿â†’ğŸŒ³</p>
            <p style="font-size: 16px; color: #f59e0b;">ğŸ’¡ The more you learn = The bigger your plant gets!</p>
          </div>
          <div class="tutorial-buttons">
            <button class="tutorial-btn" onclick="game.previousTutorialStep();">â¬… BACK</button>
            <button class="tutorial-btn" onclick="game.nextTutorialStep();">NEXT âœ</button>
          </div>
        </div>

        <div id="tutorialStep-2" class="tutorial-step" style="display:none;" data-step="2">
          <div class="tutorial-header">ğŸ¯ How to Earn Points</div>
          <div class="tutorial-body">
            <div class="activity-card" style="background: #fecaca; margin: 10px 0; padding: 15px; border-radius: 10px; color: #333;">
              <p style="font-size: 18px; margin: 5px;"><strong>ğŸ“ Pick an Activity</strong></p>
              <p style="font-size: 14px;">Choose from: Alphabet, Math, Rhyme & more!</p>
            </div>
            <div class="activity-card" style="background: #bfdbfe; margin: 10px 0; padding: 15px; border-radius: 10px; color: #333;">
              <p style="font-size: 18px; margin: 5px;"><strong>ğŸ® Answer Questions</strong></p>
              <p style="font-size: 14px;">Each activity has 5 fun questions!</p>
            </div>
            <div class="activity-card" style="background: #d1fae5; margin: 10px 0; padding: 15px; border-radius: 10px; color: #333;">
              <p style="font-size: 18px; margin: 5px;"><strong>â­ Earn Points</strong></p>
              <p style="font-size: 14px;">Get points for each correct answer!</p>
            </div>
          </div>
          <div class="tutorial-buttons">
            <button class="tutorial-btn" onclick="game.previousTutorialStep();">â¬… BACK</button>
            <button class="tutorial-btn" onclick="game.nextTutorialStep();">NEXT âœ</button>
          </div>
        </div>

        <div id="tutorialStep-3" class="tutorial-step" style="display:none;" data-step="3">
          <div class="tutorial-header">ğŸ® Available Activities</div>
          <div class="tutorial-body tutorial-scrollable" style="max-height: 350px; overflow-y: auto;">
            <div class="activity-card" style="background: #fed7aa; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸ”¤ Alphabet:</strong> Match letters & sounds!
            </div>
            <div class="activity-card" style="background: #fca5a5; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸµ Phonics:</strong> Learn letter combos!
            </div>
            <div class="activity-card" style="background: #a5f3fc; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸ¯ Match:</strong> Find matching pairs!
            </div>
            <div class="activity-card" style="background: #bae6fd; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸ‘‚ Listen:</strong> Identify sounds!
            </div>
            <div class="activity-card" style="background: #c4b5fd; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸ§© Memory:</strong> Flip & match cards!
            </div>
            <div class="activity-card" style="background: #ddd6fe; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸ‘€ Sight Words:</strong> Learn common words!
            </div>
            <div class="activity-card" style="background: #d1fae5; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸ¼ Rhyme:</strong> Find words that rhyme!
            </div>
            <div class="activity-card" style="background: #dcfce7; margin: 8px 0; padding: 12px; border-radius: 8px; font-size: 15px; color: #333;">
              <strong>ğŸ”¢ Math:</strong> Addition & subtraction!
            </div>
          </div>
          <div class="tutorial-buttons">
            <button class="tutorial-btn" onclick="game.previousTutorialStep();">â¬… BACK</button>
            <button class="tutorial-btn" onclick="game.nextTutorialStep();">NEXT âœ</button>
          </div>
        </div>

        <div id="tutorialStep-4" class="tutorial-step" style="display:none;" data-step="4">
          <div class="tutorial-header">ğŸ“Š Track Your Progress</div>
          <div class="tutorial-body">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin: 10px 0;">
              <p style="font-size: 16px; margin: 5px;"><strong>Your Score:</strong> Points from all activities</p>
            </div>
            <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 20px; border-radius: 10px; margin: 10px 0;">
              <p style="font-size: 16px; margin: 5px;"><strong>Plant Stage:</strong> Shows how much your plant grew</p>
            </div>
            <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 20px; border-radius: 10px; margin: 10px 0;">
              <p style="font-size: 16px; margin: 5px;"><strong>Daily Streak:</strong> Play every day to build a streak! ğŸ”¥</p>
            </div>
            <p style="font-size: 18px; margin-top: 20px; color: #f59e0b;">âœ¨ <strong>Play Every Day = Bigger Streak!</strong></p>
          </div>
          <div class="tutorial-buttons">
            <button class="tutorial-btn" onclick="game.previousTutorialStep();">â¬… BACK</button>
            <button class="tutorial-btn" onclick="game.nextTutorialStep();">NEXT âœ</button>
          </div>
        </div>

        <div id="tutorialStep-5" class="tutorial-step" style="display:none;" data-step="5">
          <div class="tutorial-header">â­ Tips to Level Up!</div>
          <div class="tutorial-body">
            <div style="background: #fef3c7; padding: 15px; border-radius: 10px; margin: 10px 0; border-left: 4px solid #f59e0b; color: #333;">
              <p style="font-size: 16px; margin: 5px;"><strong>ğŸ’¡ Tip #1:</strong> Each activity = 5 questions</p>
            </div>
            <div style="background: #dbeafe; padding: 15px; border-radius: 10px; margin: 10px 0; border-left: 4px solid #3b82f6; color: #333;">
              <p style="font-size: 16px; margin: 5px;"><strong>ğŸ’¡ Tip #2:</strong> Get all answers right = max points! ğŸ¯</p>
            </div>
            <div style="background: #dcfce7; padding: 15px; border-radius: 10px; margin: 10px 0; border-left: 4px solid #10b981; color: #333;">
              <p style="font-size: 16px; margin: 5px;"><strong>ğŸ’¡ Tip #3:</strong> Play activities many times!</p>
            </div>
            <div style="background: #fecaca; padding: 15px; border-radius: 10px; margin: 10px 0; border-left: 4px solid #ef4444; color: #333;">
              <p style="font-size: 16px; margin: 5px;"><strong>ğŸ’¡ Tip #4:</strong> No pressure - have FUN! ğŸ‰</p>
            </div>
          </div>
          <div class="tutorial-buttons">
            <button class="tutorial-btn" onclick="game.previousTutorialStep();">â¬… BACK</button>
            <button class="tutorial-btn" onclick="game.nextTutorialStep();">NEXT âœ</button>
          </div>
        </div>

        <div id="tutorialStep-6" class="tutorial-step" style="display:none;" data-step="6">
          <div class="tutorial-header">ğŸš€ Ready to Start?</div>
          <div class="tutorial-body" style="text-align: center;">
            <p style="font-size: 28px; margin: 20px 0;">ğŸŒŸ</p>
            <p style="font-size: 20px; font-weight: bold; margin: 15px 0;">You're all set!</p>
            <p style="font-size: 16px; margin: 15px 0;">Pick an activity and start earning points!</p>
            <p style="font-size: 16px; color: #f59e0b;">Remember: Have fun and keep learning! ğŸ®âœ¨</p>
          </div>
          <div class="tutorial-buttons">
            <button class="tutorial-btn" onclick="game.previousTutorialStep();">â¬… BACK</button>
            <button class="tutorial-btn" onclick="document.getElementById('tutorialModal').style.display='none'; game.tutorialStep = 0;">START PLAYING ğŸ‰</button>
          </div>
        </div>
        </div>
      </div>
    </div>
    <div id="gardenScreen" class="screen">
      <div class="header">
        <span class="stats" id="appTitle" style="cursor: pointer;">Score: <span id="score">0</span></span>
      </div>

      <div class="garden-content">
        <h2>ğŸŒ± <span id="nameOfPlayer" style="cursor: pointer;" title="Click 10 times to logout"></span>'s Garden</h2>
        <div class="plant-container">
          <div id="plant" class="plant-display">ğŸŒ±</div>
          <div class="plant-info">
            <p id="plantStage">Baby Seed</p>
            <div class="progress-bar">
              <div id="progressFill" class="progress-fill"></div>
            </div>
            <p id="progressText">Score: 0 / Stage 1</p>
          </div>
        </div>

        <h3>Learning Activities:</h3>
        <div class="activity-menu">
          <button
            class="activity-btn"
            onclick="game.startActivity('alphabet')"
            title="Tap & Talk"
          >
            <span class="emoji">A</span>
            <span class="label">Alphabet</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('phonics')"
            title="Sound Out"
          >
            <span class="emoji">â™ª</span>
            <span class="label">Phonics</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('match')"
            title="Match & Pop"
          >
            <span class="emoji">âœ“</span>
            <span class="label">Match</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('listen')"
            title="Listen & Find"
          >
            <span class="emoji">ğŸ“£</span>
            <span class="label">Listen</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('numbers')"
            title="Count & Learn"
          >
            <span class="emoji">1ï¸âƒ£</span>
            <span class="label">Numbers</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('colors')"
            title="Color Hunt"
          >
            <span class="emoji">ğŸŸ </span>
            <span class="label">Colors</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('shapes')"
            title="Shape Quest"
          >
            <span class="emoji">â­•</span>
            <span class="label">Shapes</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('vocab')"
            title="Picture Words"
          >
            <span class="emoji">ğŸ±</span>
            <span class="label">Vocabulary</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('memory')"
            title="Memory Match"
          >
            <span class="emoji">ğŸ§ </span>
            <span class="label">Memory</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('sightwords')"
            title="Sight Words"
          >
            <span class="emoji">ğŸ‘€</span>
            <span class="label">Sight Words</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('rhyme')"
            title="Rhyme Time"
          >
            <span class="emoji">ğŸµ</span>
            <span class="label">Rhyme</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('math')"
            title="Math Time"
          >
            <span class="emoji">â•</span>
            <span class="label">Math</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('pattern')"
            title="Pattern Quest"
          >
            <span class="emoji">ğŸ”²</span>
            <span class="label">Pattern</span>
          </button>
          <button
            class="activity-btn"
            onclick="game.startActivity('category')"
            title="Sort & Learn"
          >
            <span class="emoji">ğŸ“¦</span>
            <span class="label">Category</span>
          </button>
        </div>

        <h3>Your Progress & Features:</h3>
        <div class="streak-pet-display">
          <div class="streak-box">
            ğŸ”¥ <span id="streakCounter">0</span> Days
          </div>
        </div>

        <h3>Tools:</h3>
        <div class="feature-controls">
          <button
            class="feature-btn"
            onclick="game.showStatistics()"
            title="View Statistics"
          >
            <span class="emoji">ğŸ“Š</span>
            <span class="label">Stats</span>
          </button>
          <button
            class="feature-btn"
            onclick="game.showAchievements()"
            title="View Achievements"
          >
            <span class="emoji">ğŸ†</span>
            <span class="label">Badges</span>
          </button>
          <button
            class="feature-btn"
            onclick="game.toggleSound()"
            title="Toggle Sound"
          >
            <span class="emoji" id="soundIcon">ğŸ”Š</span>
            <span class="label">Sound</span>
          </button>
          <button
            class="feature-btn"
            onclick="game.showDailyChallenge()"
            title="Daily Challenge"
          >
            <span class="emoji">ğŸ¯</span>
            <span class="label">Daily</span>
          </button>
          <button
            class="feature-btn"
            onclick="game.showTutorial()"
            title="How to Play"
          >
            <span class="emoji">ğŸ“š</span>
            <span class="label">Help</span>
          </button>
        </div>
      </div>
    </div>

    <!-- ==================== ACTIVITY SCREEN ==================== -->
    <div id="activityScreen" class="screen">
      <div class="header">
        <button class="back-btn" onclick="game.backToGarden()">Back</button>
        <div class="question-counter">
          <span id="questionNumber">1</span>/5
        </div>
        <span class="stats">Score: <span id="activityScore">0</span></span>
      </div>

      <div class="activity-content">
        <div id="memoryStats" class="memory-stats hidden">
          <div class="memory-stat-item">
            <span class="stat-label">Pairs Found:</span>
            <span class="stat-value"><span id="pairsFound">0</span>/<span id="totalPairs">0</span></span>
          </div>
          <div class="memory-stat-item">
            <span class="stat-label">Moves:</span>
            <span class="stat-value" id="movesCount">0</span>
          </div>
        </div>
        <div class="instruction-box">
          <p id="instruction" class="instruction">Listen...</p>
          <button
            class="audio-btn"
            id="audioBtn"
            onclick="game.playInstruction()"
          >
            PLAY SOUND
          </button>
          <button id="countBtn" class="hidden audio-btn"></button>
          <button
            id="hintBtn"
            class="hidden audio-btn"
            onclick="game.showMemoryHint()"
            title="Show all cards as a hint"
          >
            HINT
          </button>
        </div>

        <div id="options" class="options-grid">
          <!-- Dynamically populated -->
        </div>

        <div id="feedback" class="feedback hidden"></div>
      </div>
    </div>

    <!-- ==================== REWARD SCREEN ==================== -->
    <div id="rewardScreen" class="screen">
      <div class="reward-content">
        <h2 class="celebrate">EXCELLENT!</h2>
        <div id="rewardPlant" class="reward-plant">ğŸŒ¿</div>
        <p id="rewardMessage" class="reward-message">Your garden is growing!</p>

        <div class="confetti" id="confetti"></div>

        <button class="main-btn" onclick="game.closeReward()">CONTINUE</button>
      </div>
    </div>

    <!-- ==================== MODAL ==================== -->

    <div id="countModal" class="modal hidden">
      <div class="modal-content">
        <h2 id="modalTitle"></h2>

        <div id="modalObjects" class="objects-grid"></div>

        <button id="closeModal" class="audio-btn">Close</button>
      </div>
    </div>

    <!-- ==================== LOGOUT CONFIRMATION MODAL ==================== -->
    <div id="logoutModal" class="modal hidden">
      <div class="modal-content">
        <h2 style="color: #ef4444; margin-bottom: 20px;">âš ï¸ Logout Confirmation</h2>
        <p id="logoutMessage" style="font-size: 18px; margin: 20px 0; text-align: center;">
          You want to log out <strong id="logoutUsername"></strong>?
        </p>
        <p style="font-size: 16px; color: #fff; margin: 15px 0; text-align: center;">
          Your progress will be saved. You can log back in anytime! ğŸ“±
        </p>
        <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
          <button class="main-btn" onclick="game.confirmLogout()" style="background: #ef4444; flex: 1;">
            âœ“ Logout
          </button>
          <button class="main-btn" onclick="game.cancelLogout()" style="background: #10b981; flex: 1;">
            âœ• Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Hidden audio element for sound effects -->
    <audio id="audioElement"></audio>

    <!-- Watermark -->
    <div class="watermark">Created by: King McDonald - version 2.0</div>

    <script src="additional.js"></script>
    <script src="sync.js"></script>
    <script src="script.js"></script>
  </body>
</html>
